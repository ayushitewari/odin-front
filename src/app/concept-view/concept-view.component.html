
<mat-accordion>


<mat-expansion-panel [expanded]="concept.expanded">
    <mat-expansion-panel-header>
        <mat-panel-title>
            <mat-list>
                <mat-list-item>
                  <mat-form-field>
                      <input matInput placeholder="" [(ngModel)]="concept.name">
                    </mat-form-field>
                    <mat-slide-toggle
                    [(ngModel)]="concept.active" (change)="update()">
                  </mat-slide-toggle>  
                    </mat-list-item>
            </mat-list>   
        </mat-panel-title>
      </mat-expansion-panel-header>
    <mat-list>
        <div *ngIf="!hideSources">
            <mat-list-item>
                <mat-form-field>
                    <mat-select placeholder="Data sources" [(ngModel)]="concept.source" (change)="changeIndex()">
                      <mat-option *ngFor="let source of concept.sources" [value]="source">
                        {{ source }}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
            </mat-list-item>
        </div>

        <mat-list-item>
            <mat-form-field>
                <mat-select placeholder="Fields" multiple [(ngModel)]="concept.selectedFields">
                  <mat-option *ngFor="let field of concept.fields" [value]="field">{{field}}</mat-option>
                </mat-select>
              </mat-form-field>
        </mat-list-item>
        <div *ngIf="!hideTypes">
          <mat-list-item>
            <mat-form-field>
                <mat-select placeholder="Types" multiple [(ngModel)]="concept.selectedTypes">
                  <mat-option *ngFor="let type of concept.types" [value]="type">{{type}}</mat-option>
                </mat-select>
              </mat-form-field>
        </mat-list-item>     
       </div>
 

        <mat-list-item>
            <mat-form-field>
                <input matInput placeholder="Query" [(ngModel)]="concept.query">

              </mat-form-field>
        </mat-list-item>
        <mat-list-item>
            <div class="button-row">
                <button mat-icon-button (click)="onExplore()" [tourAnchor]="this.conceptsLength == 1 ? 'concept-view.component.explore' : 'dummy' + this.conceptsLength">
                  <mat-icon aria-label="Explore" matTooltip="Explore your data!">search</mat-icon>
                </button>
                <button mat-icon-button>
                    <mat-icon aria-label="Expand" (click)="onExpand()" matTooltip="Expand selected nodes">add</mat-icon>
                  </button>
                  <button mat-icon-button >
                      <mat-icon aria-label="Link" (click)="onLink()" matTooltip="Link nodes">link</mat-icon>
                    </button>
                  <button mat-icon-button >
                    <mat-icon aria-label="Delete" (click)="onDelete()" matTooltip="Delete selected nodes and links">clear</mat-icon>
                  </button>  
                  <button mat-icon-button >
                    <mat-icon aria-label="Clear" (click)="onClear()" matTooltip="Delete all nodes and links">delete</mat-icon>
                  </button>    
              </div>
        </mat-list-item>        
        
        <div *ngIf="!hideOptions">
          <mat-accordion>

          
          <mat-expansion-panel> 
            <mat-expansion-panel-header>
              <mat-panel-title>
                Options
              </mat-panel-title>
              <mat-panel-description>
                
                <mat-icon></mat-icon>
              </mat-panel-description> 
            </mat-expansion-panel-header>
              <mat-list>
                  <!-- <mat-list-item>
                      <mat-form-field>
                        <mat-select placeholder="Match type" [(ngModel)]="concept.match_type">
                          <mat-option value="document">Document</mat-option>
                          <mat-option value="sentence">Sentence</mat-option>
                          <mat-option value="exact">Exact</mat-option> 
                        </mat-select>
                      </mat-form-field>        
                    </mat-list-item> -->
                  
                    <mat-list-item>
                        <mat-form-field>
                                <input matInput [matDatepicker]="pickerfrom" placeholder="From date" matTooltip="optional" [(ngModel)]="concept.from_date">
                                <mat-datepicker-toggle matSuffix [for]="pickerfrom"></mat-datepicker-toggle>
                                <mat-datepicker #pickerfrom></mat-datepicker>
                        </mat-form-field>
                </mat-list-item>
                <mat-list-item>
                        <mat-form-field>
                                <input matInput [matDatepicker]="pickerto" placeholder="To date" matTooltip="optional" [(ngModel)]="concept.to_date">
                                <mat-datepicker-toggle matSuffix [for]="pickerto"></mat-datepicker-toggle>
                                <mat-datepicker #pickerto></mat-datepicker>
                        </mat-form-field>
                      </mat-list-item>
              </mat-list>
              <mat-list-item>
                  <mat-slider matTooltip="Max number of terms to explore at each level of depth" aria-label="Breadth" [thumb-label]="true" [(ngModel)]="concept.breadth" [min]="concept.min_breadth" [max]="concept.max_breadth"></mat-slider>Breadth 
              </mat-list-item>
              <mat-list-item>
                  <mat-slider matTooltip="Max level of depth" aria-label="Depth" [thumb-label]="true" [(ngModel)]="concept.depth" [min]="concept.min_depth" [max]="concept.max_depth"></mat-slider>Depth  
              </mat-list-item>      
              <mat-list-item>
                  <mat-slider matTooltip="Min number of co-occurence to establish a link" aria-label="Certainty" [thumb-label]="true" [(ngModel)]="concept.certainty" [min]="concept.min_certainty" [max]="concept.max_certainty"></mat-slider>Certainty  
              </mat-list-item>
          </mat-expansion-panel>
        </mat-accordion>
 
        </div>
    </mat-list>
    </mat-expansion-panel>
  </mat-accordion>